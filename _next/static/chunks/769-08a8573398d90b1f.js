"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{3310:(e,r,t)=>{t.d(r,{d:()=>o});let o=function(){let e={};return{on(r,t){var o;e[r]||(e[r]=[]),null==(o=e[r])||o.push(t)},off(r,t){var o;e[r]&&(e[r]=null==(o=e[r])?void 0:o.filter(e=>e!==t))},emit(r,t){var o;e[r]&&(null==(o=e[r])||o.forEach(e=>e(t)))}}}()},4405:(e,r,t)=>{t.d(r,{u:()=>u});var o=t(12115),i=t(35317),n=t(3310),s=t(40610);function u(e){let[r,t]=(0,o.useState)(null),[u,l]=(0,o.useState)(!1),[a,c]=(0,o.useState)(null);return(0,o.useEffect)(()=>{if(!e){t(null),l(!1),c(null);return}l(!0),c(null);let r=(0,i.aQ)(e,e=>{e.exists()?t({...e.data(),id:e.id}):t(null),c(null),l(!1)},r=>{let o=new s.$({operation:"get",path:e.path});c(o),t(null),l(!1),n.d.emit("permission-error",o)});return()=>r()},[e]),{data:r,isLoading:u,error:a}}},27102:(e,r,t)=>{t.d(r,{FirebaseClientProvider:()=>u});var o=t(95155),i=t(12115),n=t(62400),s=t(81929);function u(e){let{children:r}=e,t=(0,i.useMemo)(()=>(0,s.AU)(),[]);return(0,o.jsx)(n.R8,{firebaseApp:t.firebaseApp,auth:t.auth,firestore:t.firestore,children:r})}},40610:(e,r,t)=>{t.d(r,{$:()=>i});var o=t(93004);class i extends Error{constructor(e){let r=function(e){let r=null;try{let e=(0,o.xI)().currentUser;e&&(r=function(e){var r;if(!e)return null;let t={name:e.displayName,email:e.email,email_verified:e.emailVerified,phone_number:e.phoneNumber,sub:e.uid,firebase:{identities:e.providerData.reduce((e,r)=>(r.providerId&&(e[r.providerId]=[r.uid]),e),{}),sign_in_provider:(null==(r=e.providerData[0])?void 0:r.providerId)||"custom",tenant:e.tenantId}};return{uid:e.uid,token:t}}(e))}catch(e){}return{auth:r,method:e.operation,path:"/databases/(default)/documents/".concat(e.path),resource:e.requestResourceData?{data:e.requestResourceData}:void 0}}(e);super("Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify(r,null,2))),this.name="FirebaseError",this.request=r}}},52955:(e,r,t)=>{t.d(r,{BH:()=>u,wu:()=>s,zb:()=>l});var o=t(35317),i=t(3310),n=t(40610);function s(e,r,t){(0,o.BN)(e,r,t).catch(t=>{i.d.emit("permission-error",new n.$({path:e.path,operation:"write",requestResourceData:r}))})}function u(e,r){return(0,o.gS)(e,r).catch(t=>{i.d.emit("permission-error",new n.$({path:e.path,operation:"create",requestResourceData:r}))})}function l(e){(0,o.kd)(e).catch(r=>{i.d.emit("permission-error",new n.$({path:e.path,operation:"delete"}))})}},59434:(e,r,t)=>{t.d(r,{cn:()=>n,v:()=>s});var o=t(52596),i=t(39688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.QP)((0,o.$)(r))}function s(e){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e)}},62400:(e,r,t)=>{t.d(r,{R8:()=>a,D3:()=>c,$e:()=>d});var o=t(95155),i=t(12115),n=t(93004),s=t(3310);function u(){let[e,r]=(0,i.useState)(null);if((0,i.useEffect)(()=>{let e=e=>{r(e)};return s.d.on("permission-error",e),()=>{s.d.off("permission-error",e)}},[]),e)throw e;return null}let l=(0,i.createContext)(void 0),a=e=>{let{children:r,firebaseApp:t,firestore:s,auth:a}=e,[c,d]=(0,i.useState)({user:null,isUserLoading:!0,userError:null});(0,i.useEffect)(()=>{if(!a){console.error("[FirebaseProvider] No auth service provided"),d({user:null,isUserLoading:!1,userError:Error("Auth service not provided.")});return}console.log("[FirebaseProvider] Setting up auth state listener"),d({user:null,isUserLoading:!0,userError:null});let e=(0,n.hg)(a,e=>{console.log("[FirebaseProvider] ✅ Auth state changed. User:",e?{uid:e.uid,email:e.email,emailVerified:e.emailVerified}:"null"),d({user:e,isUserLoading:!1,userError:null})},e=>{console.error("[FirebaseProvider] ❌ Auth state error:",e),d({user:null,isUserLoading:!1,userError:e})});return()=>{console.log("[FirebaseProvider] Cleaning up auth listener"),e()}},[a]);let p=(0,i.useMemo)(()=>{let e=!!(t&&s&&a);return{areServicesAvailable:e,firebaseApp:e?t:null,firestore:e?s:null,auth:e?a:null,user:c.user,isUserLoading:c.isUserLoading,userError:c.userError}},[t,s,a,c]);return(0,o.jsxs)(l.Provider,{value:p,children:[(0,o.jsx)(u,{}),r]})},c=()=>{let e=(0,i.useContext)(l);if(void 0===e)throw Error("useFirebase must be used within a FirebaseProvider.");if(!e.areServicesAvailable||!e.firebaseApp||!e.firestore||!e.auth)throw Error("Firebase core services not available. Check FirebaseProvider props.");return{firebaseApp:e.firebaseApp,firestore:e.firestore,auth:e.auth,user:e.user,isUserLoading:e.isUserLoading,userError:e.userError}};function d(e,r){let t=(0,i.useMemo)(e,r);return"object"!=typeof t||null===t||(t.__memo=!0),t}},81929:(e,r,t)=>{t.d(r,{AU:()=>f,Ge:()=>d,uN:()=>p.u,D3:()=>u.D3,$e:()=>u.$e});let o={projectId:"studio-6846103342-39d5b",appId:"1:323819567529:web:e822c92465435ba8cb6cb8",apiKey:"AIzaSyB1G10aOdc0_EpLQUb55HQiJWj-4a4AsJs",authDomain:"studio-6846103342-39d5b.firebaseapp.com",measurementId:"",messagingSenderId:"323819567529"};var i=t(23915),n=t(93004),s=t(35317),u=t(62400);t(27102);var l=t(12115),a=t(3310),c=t(40610);function d(e){let[r,t]=(0,l.useState)(null),[o,i]=(0,l.useState)(!1),[n,u]=(0,l.useState)(null);if((0,l.useEffect)(()=>{if(!e){console.log("[useCollection] No query provided, skipping subscription"),t(null),i(!1),u(null);return}let r="collection"===e.type?e.path:e._query.path.canonicalString();console.log("[useCollection] Setting up listener for:",r),i(!0),u(null);let o=(0,s.aQ)(e,e=>{console.log("[useCollection] ✅ Snapshot received for:",r,"Docs:",e.docs.length);let o=[];for(let r of e.docs)o.push({...r.data(),id:r.id});t(o),u(null),i(!1)},e=>{console.error("[useCollection] ❌ Permission error for:",r),console.error("[useCollection] Error code:",e.code),console.error("[useCollection] Error message:",e.message),console.error("[useCollection] Full error:",e);let o=new c.$({operation:"list",path:r});u(o),t(null),i(!1),a.d.emit("permission-error",o)});return()=>{console.log("[useCollection] Cleaning up listener for:",r),o()}},[e]),e&&!e.__memo)throw Error(e+" was not properly memoized using useMemoFirebase");return{data:r,isLoading:o,error:n}}var p=t(4405);function f(){if(!(0,i.Dk)().length){let e;try{e=(0,i.Wp)()}catch(r){console.warn("Automatic initialization failed. Falling back to firebase config object.",r),e=(0,i.Wp)(o)}return h(e)}return h((0,i.Sx)())}function h(e){return{firebaseApp:e,auth:(0,n.xI)(e),firestore:(0,s.aU)(e)}}t(52955)}}]);