(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{30285:(e,r,s)=>{"use strict";s.d(r,{$:()=>c});var t=s(95155),a=s(12115),n=s(66634),l=s(74466),i=s(59434);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:s,variant:a,size:l,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,t.jsx)(u,{className:(0,i.cn)(o({variant:a,size:l,className:s})),ref:r,...d})});c.displayName="Button"},62523:(e,r,s)=>{"use strict";s.d(r,{p:()=>l});var t=s(95155),a=s(12115),n=s(59434);let l=a.forwardRef((e,r)=>{let{className:s,type:a,...l}=e;return(0,t.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...l})});l.displayName="Input"},66695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>i});var t=s(95155),a=s(12115),n=s(59434);let l=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},82972:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>eh});var t=s(95155),a=s(12115),n=s(35695),l=s(96454),i=s(19591),o=s(66695),c=s(62523),d=s(85057);function u(e){let{income:r,setIncome:s}=e;return(0,t.jsxs)(o.Zp,{className:"shadow-neumorphic border-none",children:[(0,t.jsx)(o.aR,{children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i.A,{className:"w-8 h-8 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.ZB,{children:"Monthly Income"}),(0,t.jsx)(o.BT,{children:"Enter your total monthly income after tax."})]})]})}),(0,t.jsx)(o.Wu,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.J,{htmlFor:"income",className:"absolute left-4 top-1/2 -translate-y-1/2 text-lg font-bold text-muted-foreground",children:"\xa3"}),(0,t.jsx)(c.p,{id:"income",type:"number",value:r||"",onChange:e=>s(parseFloat(e.target.value)),placeholder:"2500",className:"shadow-neumorphic-inset border-none text-2xl font-bold h-16 pl-10 focus-visible:ring-primary","aria-label":"Monthly income input"})]})})]})}var m=s(59114),h=s(59069),x=s(18046),f=s(77223),g=s(30285),p=s(87489),v=s(59434);let b=a.forwardRef((e,r)=>{let{className:s,orientation:a="horizontal",decorative:n=!0,...l}=e;return(0,t.jsx)(p.b,{ref:r,decorative:n,orientation:a,className:(0,v.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...l})});b.displayName=p.b.displayName;var j=s(77484),N=s(10518);let y=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(j.bL,{ref:r,className:(0,v.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:(0,t.jsx)(j.C1,{className:(0,v.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})})});function w(e){let{bills:r,addBill:s,deleteBill:n}=e,l=a.useRef(null),[i,u]=a.useState(!0),p=r||[];return(0,t.jsxs)(o.Zp,{className:"shadow-neumorphic border-none",children:[(0,t.jsx)(o.aR,{children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(m.A,{className:"w-8 h-8 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.ZB,{children:"Monthly Bills"}),(0,t.jsx)(o.BT,{children:"Add or remove your recurring bills."})]})]})}),(0,t.jsxs)(o.Wu,{children:[(0,t.jsxs)("form",{ref:l,onSubmit:e=>{var r;e.preventDefault();let t=new FormData(e.currentTarget),a=t.get("billName");s(a,parseFloat(t.get("billAmount")),parseInt(t.get("paymentDate"),10),i),null==(r=l.current)||r.reset(),u(!0)},className:"grid grid-cols-1 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[(0,t.jsx)(c.p,{name:"billName",placeholder:"Bill name (e.g., Internet)",required:!0,className:"shadow-neumorphic-inset border-none focus-visible:ring-primary"}),(0,t.jsx)(c.p,{name:"billAmount",type:"number",placeholder:"Amount",required:!0,min:"0.01",step:"0.01",className:"shadow-neumorphic-inset border-none focus-visible:ring-primary"}),(0,t.jsx)(c.p,{name:"paymentDate",type:"number",placeholder:"Payment day (1-31)",required:!0,min:"1",max:"31",step:"1",className:"shadow-neumorphic-inset border-none focus-visible:ring-primary"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(y,{id:"recurring",checked:i,onCheckedChange:e=>u(!0===e)}),(0,t.jsxs)(d.J,{htmlFor:"recurring",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-4 w-4"}),"Recurring bill (appears every month)"]})]}),(0,t.jsxs)(g.$,{type:"submit",className:"shadow-neumorphic active:shadow-neumorphic-inset",children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Add Bill"]})]}),(0,t.jsx)(b,{className:"my-4 bg-border/60"}),(0,t.jsx)("div",{className:"space-y-4",children:0===p.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No bills added yet."}):p.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),e.recurring&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-primary/10 text-primary",children:[(0,t.jsx)(h.A,{className:"h-3 w-3"}),"Recurring"]})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Due on the ",function(e){let r=["th","st","nd","rd"],s=e%100;return e+(r[(s-20)%10]||r[s]||r[0])}(e.paymentDate)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("p",{className:"font-mono text-foreground",children:(0,v.v)(e.amount)}),(0,t.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>n(e.id),className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-full","aria-label":"Delete ".concat(e.name," bill"),children:(0,t.jsx)(f.A,{className:"h-4 w-4"})})]})]},e.id))})]})]})}function k(e){let{label:r,value:s}=e;return(0,t.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:r}),(0,t.jsx)("p",{className:"font-mono font-medium text-lg text-foreground",children:s})]})}function M(e){let{income:r,totalBills:s,balance:a}=e,n=a<0;return(0,t.jsxs)(o.Zp,{className:"shadow-neumorphic border-none",children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsx)(o.ZB,{children:"Summary"}),(0,t.jsx)(o.BT,{children:"Your financial overview for the month."})]}),(0,t.jsxs)(o.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k,{label:"Total Income",value:(0,v.v)(r)}),(0,t.jsx)(k,{label:"Total Bills",value:(0,v.v)(s)})]}),(0,t.jsx)(b,{className:"bg-border/60"}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 rounded-lg",children:[(0,t.jsx)("p",{className:"text-lg font-bold",children:"Remaining Balance"}),(0,t.jsx)("p",{className:"text-2xl font-bold font-mono ".concat(n?"text-destructive":"text-accent-foreground"),style:n?{}:{color:"hsl(var(--accent))"},children:(0,v.v)(a)})]})]})]})}y.displayName=j.bL.displayName;var R=s(58995),C=s(79133),_=s(54811),A=s(83540),B=s(94517),D=s(24026);let F={light:"",dark:".dark"},S=a.createContext(null);function I(){let e=a.useContext(S);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let Z=a.forwardRef((e,r)=>{let{id:s,className:n,children:l,config:i,...o}=e,c=a.useId(),d="chart-".concat(s||c.replace(/:/g,""));return(0,t.jsx)(S.Provider,{value:{config:i},children:(0,t.jsxs)("div",{"data-chart":d,ref:r,className:(0,v.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...o,children:[(0,t.jsx)($,{id:d,config:i}),(0,t.jsx)(A.u,{children:l})]})})});Z.displayName="Chart";let $=e=>{let{id:r,config:s}=e,a=Object.entries(s).filter(e=>{let[,r]=e;return r.theme||r.color});return a.length?(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(F).map(e=>{let[s,t]=e;return"\n".concat(t," [data-chart=").concat(r,"] {\n").concat(a.map(e=>{var r;let[t,a]=e,n=(null==(r=a.theme)?void 0:r[s])||a.color;return n?"  --color-".concat(t,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},E=B.m,T=a.forwardRef((e,r)=>{let{active:s,payload:n,className:l,indicator:i="dot",hideLabel:o=!1,hideIndicator:c=!1,label:d,labelFormatter:u,labelClassName:m,formatter:h,color:x,nameKey:f,labelKey:g}=e,{config:p}=I(),b=a.useMemo(()=>{var e;if(o||!(null==n?void 0:n.length))return null;let[r]=n,s="".concat(g||r.dataKey||r.name||"value"),a=z(p,r,s),l=g||"string"!=typeof d?null==a?void 0:a.label:(null==(e=p[d])?void 0:e.label)||d;return u?(0,t.jsx)("div",{className:(0,v.cn)("font-medium",m),children:u(l,n)}):l?(0,t.jsx)("div",{className:(0,v.cn)("font-medium",m),children:l}):null},[d,u,n,o,m,p,g]);if(!s||!(null==n?void 0:n.length))return null;let j=1===n.length&&"dot"!==i;return(0,t.jsxs)("div",{ref:r,className:(0,v.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",l),children:[j?null:b,(0,t.jsx)("div",{className:"grid gap-1.5",children:n.map((e,r)=>{let s="".concat(f||e.name||e.dataKey||"value"),a=z(p,e,s),n=x||e.payload.fill||e.color;return(0,t.jsx)("div",{className:(0,v.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:h&&(null==e?void 0:e.value)!==void 0&&e.name?h(e.value,e.name,e,r,e.payload):(0,t.jsxs)(t.Fragment,{children:[(null==a?void 0:a.icon)?(0,t.jsx)(a.icon,{}):!c&&(0,t.jsx)("div",{className:(0,v.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":j&&"dashed"===i}),style:{"--color-bg":n,"--color-border":n}}),(0,t.jsxs)("div",{className:(0,v.cn)("flex flex-1 justify-between leading-none",j?"items-end":"items-center"),children:[(0,t.jsxs)("div",{className:"grid gap-1.5",children:[j?b:null,(0,t.jsx)("span",{className:"text-muted-foreground",children:(null==a?void 0:a.label)||e.name})]}),e.value&&(0,t.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function z(e,r,s){if("object"!=typeof r||null===r)return;let t="payload"in r&&"object"==typeof r.payload&&null!==r.payload?r.payload:void 0,a=s;return s in r&&"string"==typeof r[s]?a=r[s]:t&&s in t&&"string"==typeof t[s]&&(a=t[s]),a in e?e[a]:e[s]}T.displayName="ChartTooltip",D.s,a.forwardRef((e,r)=>{let{className:s,hideIcon:a=!1,payload:n,verticalAlign:l="bottom",nameKey:i}=e,{config:o}=I();return(null==n?void 0:n.length)?(0,t.jsx)("div",{ref:r,className:(0,v.cn)("flex items-center justify-center gap-4","top"===l?"pb-3":"pt-3",s),children:n.map(e=>{let r="".concat(i||e.dataKey||"value"),s=z(o,e,r);return(0,t.jsxs)("div",{className:(0,v.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==s?void 0:s.icon)&&!a?(0,t.jsx)(s.icon,{}):(0,t.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==s?void 0:s.label]},e.value)})}):null}).displayName="ChartLegend";let L=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"];function W(e){let{bills:r,balance:s,income:n}=e,l=a.useMemo(()=>{let e=(r||[]).map((e,r)=>({name:e.name,value:e.amount,fill:L[r%L.length]}));return s>0&&e.push({name:"Remaining",value:s,fill:"hsl(var(--accent))"}),e},[r,s]),i=a.useMemo(()=>{let e={remaining:{label:"Remaining",color:"hsl(var(--accent))"}};return(r||[]).forEach((r,s)=>{e[r.name]={label:r.name,color:L[s%L.length]}}),e},[r]);return(0,t.jsxs)(o.Zp,{className:"shadow-neumorphic border-none flex flex-col",children:[(0,t.jsx)(o.aR,{className:"items-center pb-0",children:(0,t.jsx)(o.ZB,{children:"Spending Breakdown"})}),(0,t.jsx)(o.Wu,{className:"flex-1 pb-0",children:n>0&&l.length>0?(0,t.jsx)(Z,{config:i,className:"mx-auto aspect-square max-h-[300px]",children:(0,t.jsxs)(R.r,{children:[(0,t.jsx)(E,{cursor:!1,content:(0,t.jsx)(T,{hideLabel:!0})}),(0,t.jsx)(C.F,{data:l,dataKey:"value",nameKey:"name",innerRadius:60,strokeWidth:5,children:l.map(e=>(0,t.jsx)(_.f,{fill:e.fill,className:"focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},e.name))})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full min-h-[250px] text-muted-foreground text-center p-4",children:(0,t.jsx)("p",{children:"Enter your income and some bills to see a breakdown of your spending."})})})]})}var G=s(965),H=s(73158),J=s(28184);function O(e){let{selectedMonth:r,onMonthChange:s}=e;return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 p-4 rounded-lg bg-card shadow-neumorphic",children:[(0,t.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>{let e=new Date(r);e.setMonth(e.getMonth()-1),s(e)},className:"h-10 w-10",children:(0,t.jsx)(G.A,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:(0,J.GP)(r,"MMMM yyyy")}),!(()=>{let e=new Date;return r.getMonth()===e.getMonth()&&r.getFullYear()===e.getFullYear()})()&&(0,t.jsx)(g.$,{variant:"link",size:"sm",onClick:()=>{s(new Date)},className:"text-xs text-muted-foreground",children:"Go to current month"})]}),(0,t.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>{let e=new Date(r);e.setMonth(e.getMonth()+1),s(e)},className:"h-10 w-10",children:(0,t.jsx)(H.A,{className:"h-5 w-5"})})]})}var P=s(35317),K=s(52955);function Y(){var e;let{firestore:r,user:s,isUserLoading:n}=(0,l.D3)(),[i,o]=(0,a.useState)(new Date),c=function(e){let r=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0");return"".concat(r,"-").concat(s)}(i),d=(0,l.$e)(()=>s?(0,P.H9)(r,"users",s.uid,"months",c):null,[r,s,c]),{data:m}=(0,l.uN)(d),h=null!=(e=null==m?void 0:m.monthlyIncome)?e:0,x=(0,l.$e)(()=>s?(0,P.rJ)(r,"users",s.uid,"months",c,"bills"):null,[r,s,c]),{data:f}=(0,l.Ge)(x),g=(0,a.useMemo)(()=>(f||[]).reduce((e,r)=>e+r.amount,0),[f]),p=(0,a.useMemo)(()=>h-g,[h,g]);return n?(0,t.jsx)("div",{className:"text-center",children:"Loading..."}):(0,t.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,t.jsx)(O,{selectedMonth:i,onMonthChange:o}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-3 flex flex-col gap-8",children:[(0,t.jsx)(u,{income:h,setIncome:e=>{if(d){let r=isNaN(e)||e<0?0:e;(0,K.wu)(d,{monthlyIncome:r},{merge:!0})}}}),(0,t.jsx)(w,{bills:f,addBill:function(e,r,s){let t=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!e||isNaN(r)||r<=0||!x||isNaN(s)||(0,K.BH)(x,{name:e,amount:r,paymentDate:s,recurring:t})},deleteBill:e=>{x&&(0,K.zb)((0,P.H9)(x,e))}})]}),(0,t.jsxs)("div",{className:"lg:col-span-2 flex flex-col gap-8",children:[(0,t.jsx)(M,{income:h,totalBills:g,balance:p}),(0,t.jsx)(W,{income:h,bills:f,balance:p})]})]})]})}var q=s(51920),V=s(80659),U=s(77070);function X(e){let{onMonthSelect:r}=e,{firestore:s,user:a}=(0,l.D3)(),n=(0,l.$e)(()=>a?(0,P.P)((0,P.rJ)(s,"users",a.uid,"months"),(0,P.My)("__name__","desc")):null,[s,a]),{data:i}=(0,l.Ge)(n);if(!i||0===i.length)return(0,t.jsxs)(o.Zp,{className:"shadow-neumorphic",children:[(0,t.jsx)(o.aR,{children:(0,t.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(q.A,{className:"h-5 w-5"}),"Monthly Overview"]})}),(0,t.jsx)(o.Wu,{children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No monthly data yet. Start by adding your income and bills for this month."})})]});let c=e=>{let[r,s]=e.split("-");return new Date(parseInt(r),parseInt(s)-1,1)};return(0,t.jsxs)(o.Zp,{className:"shadow-neumorphic",children:[(0,t.jsx)(o.aR,{children:(0,t.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(q.A,{className:"h-5 w-5"}),"Monthly Overview"]})}),(0,t.jsx)(o.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:i.map(e=>{var s;let a=c(e.id),n=null!=(s=e.monthlyIncome)?s:0;return(0,t.jsxs)(g.$,{variant:"ghost",className:"w-full justify-between h-auto p-4 shadow-neumorphic hover:shadow-neumorphic-inset",onClick:()=>null==r?void 0:r(e.id),children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-semibold",children:(0,J.GP)(a,"MMMM yyyy")}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Income: $",n.toFixed(2)]})]})}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:n>0?(0,t.jsx)(V.A,{className:"h-4 w-4 text-green-600"}):(0,t.jsx)(U.A,{className:"h-4 w-4 text-muted-foreground"})})]},e.id)})})})]})}let Q=(0,s(74466).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ee=a.forwardRef((e,r)=>{let{className:s,variant:a,...n}=e;return(0,t.jsx)("div",{ref:r,role:"alert",className:(0,v.cn)(Q({variant:a}),s),...n})});ee.displayName="Alert";let er=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("h5",{ref:r,className:(0,v.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});er.displayName="AlertTitle";let es=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,v.cn)("text-sm [&_p]:leading-relaxed",s),...a})});es.displayName="AlertDescription";var et=s(11133),ea=s(50172),en=s(58127);function el(){let{firestore:e,user:r}=(0,l.D3)(),[s,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if(r)try{let s=(0,P.rJ)(e,"users",r.uid,"bills"),t=await (0,P.GG)(s);n(!t.empty)}catch(e){console.log("No legacy data found or error checking:",e)}})()},[r,e]);let h=async()=>{if(r){o(!0),m(null);try{var s,t;let a=(0,P.wP)(e),l=new Date,i="".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0")),o=(0,P.rJ)(e,"users",r.uid,"bills"),c=await (0,P.GG)(o),u=(0,P.H9)(e,"users",r.uid),m=await (0,P.x7)(u);if(m.exists()&&(null==(s=m.data())?void 0:s.monthlyIncome)){let s=(0,P.H9)(e,"users",r.uid,"months",i);a.set(s,{monthlyIncome:null==(t=m.data())?void 0:t.monthlyIncome},{merge:!0})}c.docs.forEach(s=>{let t=s.data(),n=(0,P.H9)((0,P.rJ)(e,"users",r.uid,"months",i,"bills"));a.set(n,{...t,recurring:!0})}),await a.commit(),d(!0),n(!1),setTimeout(()=>window.location.reload(),2e3)}catch(e){console.error("Migration error:",e),m(e instanceof Error?e.message:"Migration failed")}finally{o(!1)}}};return!s||c?null:(0,t.jsxs)(ee,{className:"mb-4",children:[(0,t.jsx)(et.A,{className:"h-4 w-4"}),(0,t.jsx)(er,{children:"Old Data Detected"}),(0,t.jsxs)(es,{className:"mt-2",children:[(0,t.jsx)("p",{className:"mb-3",children:"We found your previous income and bills. Would you like to migrate them to the new monthly system? Your bills will be marked as recurring and will appear in all future months."}),u&&(0,t.jsxs)("p",{className:"text-red-600 text-sm mb-2",children:["Error: ",u]}),(0,t.jsx)(g.$,{onClick:h,disabled:i,size:"sm",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Migrating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(en.A,{className:"mr-2 h-4 w-4"}),"Migrate My Data"]})})]})]})}var ei=s(49255);let eo=ei.bL,ec=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(ei.B8,{ref:r,className:(0,v.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});ec.displayName=ei.B8.displayName;let ed=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(ei.l9,{ref:r,className:(0,v.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});ed.displayName=ei.l9.displayName;let eu=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(ei.UC,{ref:r,className:(0,v.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});eu.displayName=ei.UC.displayName;var em=s(33349);function eh(){let{user:e,isUserLoading:r,auth:s}=(0,l.D3)(),o=(0,n.useRouter)(),[c,d]=(0,a.useState)("current");return((0,a.useEffect)(()=>{r||e||o.push("/login")},[e,r,o]),r||!e)?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)("p",{children:"Loading..."})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("main",{className:"container mx-auto p-4 md:p-8",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-headline font-bold text-foreground tracking-tight",children:"Anna's budget"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 max-w-2xl",children:"A clean and simple way to track your monthly income and bills."})]}),(0,t.jsxs)(g.$,{variant:"ghost",onClick:()=>{s&&s.signOut()},className:"shadow-neumorphic active:shadow-neumorphic-inset",children:[(0,t.jsx)(em.A,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),(0,t.jsx)(el,{}),(0,t.jsxs)(eo,{value:c,onValueChange:d,className:"w-full",children:[(0,t.jsxs)(ec,{className:"grid w-full max-w-md mx-auto grid-cols-2 mb-8",children:[(0,t.jsxs)(ed,{value:"current",className:"flex items-center gap-2",children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),"Current Month"]}),(0,t.jsxs)(ed,{value:"overview",className:"flex items-center gap-2",children:[(0,t.jsx)(q.A,{className:"h-4 w-4"}),"All Months"]})]}),(0,t.jsx)(eu,{value:"current",children:(0,t.jsx)(Y,{},e.uid)}),(0,t.jsx)(eu,{value:"overview",children:(0,t.jsx)(X,{onMonthSelect:e=>{d("current")}})})]})]})})}},85057:(e,r,s)=>{"use strict";s.d(r,{J:()=>c});var t=s(95155),a=s(12115),n=s(40968),l=s(74466),i=s(59434);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(n.b,{ref:r,className:(0,i.cn)(o(),s),...a})});c.displayName=n.b.displayName},85267:(e,r,s)=>{Promise.resolve().then(s.bind(s,82972))}},e=>{var r=r=>e(e.s=r);e.O(0,[992,644,530,661,43,930,441,684,358],()=>r(85267)),_N_E=e.O()}]);