(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{30285:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var a=t(95155),r=t(12115),l=t(66634),n=t(74466),i=t(59434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:c=!1,...d}=e,m=c?l.DX:"button";return(0,a.jsx)(m,{className:(0,i.cn)(o({variant:r,size:n,className:t})),ref:s,...d})});c.displayName="Button"},59409:(e,s,t)=>{"use strict";t.d(s,{bq:()=>u,eb:()=>p,gC:()=>f,l6:()=>d,yv:()=>m});var a=t(95155),r=t(12115),l=t(11031),n=t(79556),i=t(77381),o=t(10518),c=t(59434);let d=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:r,position:n="popper",...i}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(x,{}),(0,a.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});f.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.JU.displayName;let p=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});p.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.wv.displayName},62523:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(95155),r=t(12115),l=t(59434);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},66695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>i});var a=t(95155),r=t(12115),l=t(59434);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},67991:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ek});var a=t(95155),r=t(12115),l=t(35695),n=t(81929),i=t(19591),o=t(66695),c=t(62523),d=t(85057);function m(e){let{income:s,setIncome:t}=e;return(0,a.jsxs)(o.Zp,{className:"shadow-neumorphic border-none",children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ZB,{children:"Monthly Income"}),(0,a.jsx)(o.BT,{children:"Enter your total monthly income after tax."})]})]})}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.J,{htmlFor:"income",className:"absolute left-4 top-1/2 -translate-y-1/2 text-lg font-bold text-muted-foreground",children:"\xa3"}),(0,a.jsx)(c.p,{id:"income",type:"number",value:s||"",onChange:e=>t(parseFloat(e.target.value)),placeholder:"2500",className:"shadow-neumorphic-inset border-none text-2xl font-bold h-16 pl-10 focus-visible:ring-primary","aria-label":"Monthly income input"})]})})]})}var u=t(59114),x=t(59069),h=t(18046),f=t(77223),p=t(30285),g=t(87489),j=t(59434);let v=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...n}=e;return(0,a.jsx)(g.b,{ref:s,decorative:l,orientation:r,className:(0,j.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...n})});v.displayName=g.b.displayName;var N=t(76981),b=t(10518);let y=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(N.bL,{ref:s,className:(0,j.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,a.jsx)(N.C1,{className:(0,j.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})})});y.displayName=N.bL.displayName;var w=t(59409);function k(e){let{bills:s,addBill:t,deleteBill:l}=e,n=r.useRef(null),[m,g]=r.useState(!0),[N,b]=r.useState(""),[k,C]=r.useState(""),[R,A]=r.useState(!1),_=s||[],M=r.useMemo(()=>{let e=new Set;return _.forEach(s=>{s.paymentAccount&&e.add(s.paymentAccount)}),Array.from(e).sort()},[_]);return(0,a.jsxs)(o.Zp,{className:"shadow-neumorphic border-none",children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(u.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ZB,{children:"Monthly Bills"}),(0,a.jsx)(o.BT,{children:"Add or remove your recurring bills."})]})]})}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsxs)("form",{ref:n,onSubmit:e=>{var s;e.preventDefault();let a=new FormData(e.currentTarget),r=a.get("billName"),l=parseFloat(a.get("billAmount"));t(r,l,parseInt(a.get("paymentDate"),10),m,(R&&k?k:N)||void 0),null==(s=n.current)||s.reset(),g(!0),b(""),C(""),A(!1)},className:"grid grid-cols-1 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[(0,a.jsx)(c.p,{name:"billName",placeholder:"Bill name (e.g., Internet)",required:!0,className:"shadow-neumorphic-inset border-none focus-visible:ring-primary"}),(0,a.jsx)(c.p,{name:"billAmount",type:"number",placeholder:"Amount",required:!0,min:"0.01",step:"0.01",className:"shadow-neumorphic-inset border-none focus-visible:ring-primary"}),(0,a.jsx)(c.p,{name:"paymentDate",type:"number",placeholder:"Payment day (1-31)",required:!0,min:"1",max:"31",step:"1",className:"shadow-neumorphic-inset border-none focus-visible:ring-primary"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(d.J,{htmlFor:"payment-account",className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Payment Account (Optional)"]}),R?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.p,{value:k,onChange:e=>C(e.target.value),placeholder:"New account name (e.g., Chase Checking)",className:"shadow-neumorphic-inset border-none focus-visible:ring-primary"}),(0,a.jsx)(p.$,{type:"button",variant:"outline",onClick:()=>{A(!1),C("")},children:"Cancel"})]}):(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(w.l6,{value:N,onValueChange:b,children:[(0,a.jsx)(w.bq,{className:"shadow-neumorphic-inset border-none",children:(0,a.jsx)(w.yv,{placeholder:"Select account"})}),(0,a.jsxs)(w.gC,{children:[M.map(e=>(0,a.jsx)(w.eb,{value:e,children:e},e)),(0,a.jsx)(w.eb,{value:"__new__",children:"+ Create new account"})]})]}),"__new__"===N&&(0,a.jsx)(p.$,{type:"button",variant:"outline",onClick:()=>{A(!0),b("")},children:"Add New"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y,{id:"recurring",checked:m,onCheckedChange:e=>g(!0===e)}),(0,a.jsxs)(d.J,{htmlFor:"recurring",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),"Recurring bill (appears every month)"]})]}),(0,a.jsxs)(p.$,{type:"submit",className:"shadow-neumorphic active:shadow-neumorphic-inset",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Add Bill"]})]}),(0,a.jsx)(v,{className:"my-4 bg-border/60"}),(0,a.jsx)("div",{className:"space-y-4",children:0===_.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No bills added yet."}):_.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),e.recurring&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold bg-orange-500/90 text-white shadow-sm",children:[(0,a.jsx)(x.A,{className:"h-3 w-3"}),"Recurring"]}),e.paymentAccount&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-muted text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-3 w-3"}),e.paymentAccount]})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Due on the ",function(e){let s=["th","st","nd","rd"],t=e%100;return e+(s[(t-20)%10]||s[t]||s[0])}(e.paymentDate)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("p",{className:"font-mono text-foreground",children:(0,j.v)(e.amount)}),(0,a.jsx)(p.$,{variant:"ghost",size:"icon",onClick:()=>l(e.id),className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-full","aria-label":"Delete ".concat(e.name," bill"),children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})]})]},e.id))})]})]})}var C=t(35317),R=t(4405);function A(){let{user:e,firestore:s}=(0,n.D3)(),t=(0,n.$e)(()=>e?(0,C.H9)(s,"users",e.uid,"profile","data"):null,[s,e]),{data:a}=(0,R.u)(t);return(null==a?void 0:a.currency)||"USD"}var _=t(50172),M=t(74601);function B(e){let{label:s,value:t}=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:s}),(0,a.jsx)("p",{className:"font-mono font-medium text-lg text-foreground",children:t})]})}function D(e){let{income:s,totalBills:t,balance:l,bills:i}=e,c=l<0,{firestore:d,user:m}=(0,n.D3)(),u=A(),[x,h]=(0,r.useState)(null),[f,g]=(0,r.useState)(!1),[N,b]=(0,r.useState)(!1),y=(0,n.$e)(()=>m?(0,C.H9)(d,"users",m.uid,"profile","data"):null,[d,m]),{data:w}=(0,n.uN)(y),k=async()=>{g(!0);try{let e=await fetch("/api/ai/recommendations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({income:s,totalBills:t,balance:l,householdSize:null==w?void 0:w.householdSize,location:null==w?void 0:w.location,occupation:null==w?void 0:w.occupation,currency:u,bills:null==i?void 0:i.map(e=>({name:e.name,amount:e.amount,recurring:e.recurring}))})});if(e.ok){let s=await e.json();h(s),b(!0)}}catch(e){console.error("Failed to get AI recommendations:",e)}finally{g(!1)}};return(0,a.jsxs)(o.Zp,{className:"shadow-neumorphic border-none",children:[(0,a.jsxs)(o.aR,{children:[(0,a.jsx)(o.ZB,{children:"Summary"}),(0,a.jsx)(o.BT,{children:"Your financial overview for the month."})]}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B,{label:"Total Income",value:(0,j.v)(s)}),(0,a.jsx)(B,{label:"Total Bills",value:(0,j.v)(t)})]}),(0,a.jsx)(v,{className:"bg-border/60"}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 rounded-lg",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"Remaining Balance"}),(0,a.jsx)("p",{className:"text-2xl font-bold font-mono ".concat(c?"text-destructive":"text-accent-foreground"),style:c?{}:{color:"hsl(var(--accent))"},children:(0,j.v)(l)})]}),(0,a.jsx)(v,{className:"bg-border/60"}),(0,a.jsx)("div",{className:"space-y-3",children:N?x&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-4 w-4 text-primary"}),"AI Insights"]}),(0,a.jsx)(p.$,{onClick:()=>b(!1),variant:"ghost",size:"sm",className:"h-6 text-xs",children:"Hide"})]}),(0,a.jsxs)("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground italic",children:x.summary}),(0,a.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-foreground",children:"Recommendations:"}),(0,a.jsx)("ul",{className:"space-y-1.5",children:x.recommendations.map((e,s)=>(0,a.jsxs)("li",{className:"text-xs text-muted-foreground flex gap-2",children:[(0,a.jsx)("span",{className:"text-primary",children:"•"}),(0,a.jsx)("span",{children:e})]},s))})]}),x.insights&&(0,a.jsx)("div",{className:"pt-2 mt-2 border-t border-border/40",children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:x.insights})})]})]}):(0,a.jsx)(p.$,{onClick:k,disabled:f,variant:"outline",className:"w-full shadow-neumorphic active:shadow-neumorphic-inset",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Getting AI insights..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"Get AI Recommendations"]})})})]})]})}var I=t(8782),S=t(34e3),z=t(54811),L=t(83540),F=t(94517),Z=t(24026);let $={light:"",dark:".dark"},P=r.createContext(null);function T(){let e=r.useContext(P);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let H=r.forwardRef((e,s)=>{let{id:t,className:l,children:n,config:i,...o}=e,c=r.useId(),d="chart-".concat(t||c.replace(/:/g,""));return(0,a.jsx)(P.Provider,{value:{config:i},children:(0,a.jsxs)("div",{"data-chart":d,ref:s,className:(0,j.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...o,children:[(0,a.jsx)(O,{id:d,config:i}),(0,a.jsx)(L.u,{children:n})]})})});H.displayName="Chart";let O=e=>{let{id:s,config:t}=e,r=Object.entries(t).filter(e=>{let[,s]=e;return s.theme||s.color});return r.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries($).map(e=>{let[t,a]=e;return"\n".concat(a," [data-chart=").concat(s,"] {\n").concat(r.map(e=>{var s;let[a,r]=e,l=(null==(s=r.theme)?void 0:s[t])||r.color;return l?"  --color-".concat(a,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},U=F.m,G=r.forwardRef((e,s)=>{let{active:t,payload:l,className:n,indicator:i="dot",hideLabel:o=!1,hideIndicator:c=!1,label:d,labelFormatter:m,labelClassName:u,formatter:x,color:h,nameKey:f,labelKey:p}=e,{config:g}=T(),v=r.useMemo(()=>{var e;if(o||!(null==l?void 0:l.length))return null;let[s]=l,t="".concat(p||s.dataKey||s.name||"value"),r=J(g,s,t),n=p||"string"!=typeof d?null==r?void 0:r.label:(null==(e=g[d])?void 0:e.label)||d;return m?(0,a.jsx)("div",{className:(0,j.cn)("font-medium",u),children:m(n,l)}):n?(0,a.jsx)("div",{className:(0,j.cn)("font-medium",u),children:n}):null},[d,m,l,o,u,g,p]);if(!t||!(null==l?void 0:l.length))return null;let N=1===l.length&&"dot"!==i;return(0,a.jsxs)("div",{ref:s,className:(0,j.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[N?null:v,(0,a.jsx)("div",{className:"grid gap-1.5",children:l.map((e,s)=>{let t="".concat(f||e.name||e.dataKey||"value"),r=J(g,e,t),l=h||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,j.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:x&&(null==e?void 0:e.value)!==void 0&&e.name?x(e.value,e.name,e,s,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==r?void 0:r.icon)?(0,a.jsx)(r.icon,{}):!c&&(0,a.jsx)("div",{className:(0,j.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":N&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,a.jsxs)("div",{className:(0,j.cn)("flex flex-1 justify-between leading-none",N?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[N?v:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==r?void 0:r.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function J(e,s,t){if("object"!=typeof s||null===s)return;let a="payload"in s&&"object"==typeof s.payload&&null!==s.payload?s.payload:void 0,r=t;return t in s&&"string"==typeof s[t]?r=s[t]:a&&t in a&&"string"==typeof a[t]&&(r=a[t]),r in e?e[r]:e[t]}G.displayName="ChartTooltip",Z.s,r.forwardRef((e,s)=>{let{className:t,hideIcon:r=!1,payload:l,verticalAlign:n="bottom",nameKey:i}=e,{config:o}=T();return(null==l?void 0:l.length)?(0,a.jsx)("div",{ref:s,className:(0,j.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",t),children:l.map(e=>{let s="".concat(i||e.dataKey||"value"),t=J(o,e,s);return(0,a.jsxs)("div",{className:(0,j.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==t?void 0:t.icon)&&!r?(0,a.jsx)(t.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==t?void 0:t.label]},e.value)})}):null}).displayName="ChartLegend";let W=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"];function K(e){let{bills:s,balance:t,income:l}=e,n=r.useMemo(()=>{let e=(s||[]).map((e,s)=>{let t=l>0?Math.round(e.amount/l*100):0;return{name:e.name,value:e.amount,percentage:t,fill:W[s%W.length]}});if(t>0){let s=l>0?Math.round(t/l*100):0;e.push({name:"Remaining",value:t,percentage:s,fill:"hsl(var(--accent))"})}return e},[s,t,l]),i=r.useMemo(()=>{let e={remaining:{label:"Remaining",color:"hsl(var(--accent))"}};return(s||[]).forEach((s,t)=>{e[s.name]={label:s.name,color:W[t%W.length]}}),e},[s]);return(0,a.jsxs)(o.Zp,{className:"shadow-neumorphic border-none flex flex-col",children:[(0,a.jsx)(o.aR,{className:"items-center pb-0",children:(0,a.jsx)(o.ZB,{children:"Spending Breakdown"})}),(0,a.jsx)(o.Wu,{className:"flex-1 pb-0",children:l>0&&n.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(H,{config:i,className:"mx-auto aspect-square max-h-[250px]",children:(0,a.jsxs)(I.r,{children:[(0,a.jsx)(U,{cursor:!1,content:(0,a.jsx)(G,{hideLabel:!0})}),(0,a.jsx)(S.F,{data:n,dataKey:"value",nameKey:"name",innerRadius:60,strokeWidth:5,label:e=>{let{name:s,percentage:t}=e;return"".concat(s," - ").concat(t,"%")},labelLine:{stroke:"hsl(var(--foreground))",strokeWidth:1},children:n.map(e=>(0,a.jsx)(z.f,{fill:e.fill,className:"focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},e.name))})]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 px-4 pb-4",children:n.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.fill}}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground truncate",children:e.name})]},e.name))})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full min-h-[250px] text-muted-foreground text-center p-4",children:(0,a.jsx)("p",{children:"Enter your income and some bills to see a breakdown of your spending."})})})]})}let q={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CNY:"\xa5",INR:"₹",AUD:"A$",CAD:"C$",SGD:"S$",CHF:"CHF",KRW:"₩",THB:"฿",MYR:"RM",VND:"₫",IDR:"Rp",PHP:"₱",MMK:"K"};var E=t(80659),Y=t(99445),V=t(94754),Q=t(96025),X=t(16238),ee=t(62341);let es={income:{label:"Income",color:"hsl(var(--chart-1))"},bills:{label:"Bills",color:"hsl(var(--chart-2))"}};function et(){let{firestore:e,user:s}=(0,n.D3)(),t=q[A()]||"$",r=(0,n.$e)(()=>s?(0,C.P)((0,C.rJ)(e,"users",s.uid,"months"),(0,C.My)("__name__","desc"),(0,C.AB)(6)):null,[e,s]),{data:l,isLoading:i}=(0,n.Ge)(r),c=l?[...l].reverse().map(e=>{let[s,t]=e.id.split("-");return{month:new Date(parseInt(s),parseInt(t)-1).toLocaleDateString("en-US",{month:"short"}),income:e.monthlyIncome||0,bills:0}}):[];return i?(0,a.jsxs)(o.Zp,{className:"shadow-neumorphic",children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"h-5 w-5"}),"Monthly Trend"]})}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading..."})})})]}):c.length?(0,a.jsxs)(o.Zp,{className:"shadow-neumorphic",children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"h-5 w-5"}),"Monthly Trend"]})}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)(H,{config:es,className:"h-[200px] w-full",children:(0,a.jsxs)(Y.Q,{accessibilityLayer:!0,data:c,margin:{left:12,right:12},children:[(0,a.jsx)(V.d,{vertical:!1}),(0,a.jsx)(Q.W,{dataKey:"month",tickLine:!1,axisLine:!1,tickMargin:8}),(0,a.jsx)(X.h,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>"".concat(t).concat(e)}),(0,a.jsx)(U,{cursor:!1,content:(0,a.jsx)(G,{})}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"fillIncome",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"var(--color-income)",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"var(--color-income)",stopOpacity:.1})]}),(0,a.jsxs)("linearGradient",{id:"fillBills",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"var(--color-bills)",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"var(--color-bills)",stopOpacity:.1})]})]}),(0,a.jsx)(ee.G,{dataKey:"income",type:"natural",fill:"url(#fillIncome)",fillOpacity:.4,stroke:"var(--color-income)",stackId:"a"}),(0,a.jsx)(ee.G,{dataKey:"bills",type:"natural",fill:"url(#fillBills)",fillOpacity:.4,stroke:"var(--color-bills)",stackId:"a"})]})})})]}):(0,a.jsxs)(o.Zp,{className:"shadow-neumorphic",children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"h-5 w-5"}),"Monthly Trend"]})}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No data yet. Income and bills will appear here over time."})})})]})}var ea=t(965),er=t(73158),el=t(28184);function en(e){let{selectedMonth:s,onMonthChange:t}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 p-4 rounded-lg bg-card shadow-neumorphic",children:[(0,a.jsx)(p.$,{variant:"ghost",size:"icon",onClick:()=>{let e=new Date(s);e.setMonth(e.getMonth()-1),t(e)},className:"h-10 w-10",children:(0,a.jsx)(ea.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:(0,el.GP)(s,"MMMM yyyy")}),!(()=>{let e=new Date;return s.getMonth()===e.getMonth()&&s.getFullYear()===e.getFullYear()})()&&(0,a.jsx)(p.$,{variant:"link",size:"sm",onClick:()=>{t(new Date)},className:"text-xs text-muted-foreground",children:"Go to current month"})]}),(0,a.jsx)(p.$,{variant:"ghost",size:"icon",onClick:()=>{let e=new Date(s);e.setMonth(e.getMonth()+1),t(e)},className:"h-10 w-10",children:(0,a.jsx)(er.A,{className:"h-5 w-5"})})]})}var ei=t(52955);function eo(){var e;let{firestore:s,user:t,isUserLoading:l}=(0,n.D3)(),[i,o]=(0,r.useState)(new Date),c=function(e){let s=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0");return"".concat(s,"-").concat(t)}(i),d=(0,n.$e)(()=>t?(0,C.H9)(s,"users",t.uid,"months",c):null,[s,t,c]),{data:u}=(0,n.uN)(d),x=null!=(e=null==u?void 0:u.monthlyIncome)?e:0,h=(0,n.$e)(()=>t?(0,C.rJ)(s,"users",t.uid,"months",c,"bills"):null,[s,t,c]),{data:f}=(0,n.Ge)(h),p=(0,r.useMemo)(()=>(f||[]).reduce((e,s)=>e+s.amount,0),[f]),g=(0,r.useMemo)(()=>x-p,[x,p]);return l?(0,a.jsx)("div",{className:"text-center",children:"Loading..."}):(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)(en,{selectedMonth:i,onMonthChange:o}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-3 flex flex-col gap-8",children:[(0,a.jsx)(m,{income:x,setIncome:e=>{if(d){let s=isNaN(e)||e<0?0:e;(0,ei.wu)(d,{monthlyIncome:s},{merge:!0})}}}),(0,a.jsx)(k,{bills:f,addBill:function(e,s,t){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;!e||isNaN(s)||s<=0||!h||isNaN(t)||(0,ei.BH)(h,{name:e,amount:s,paymentDate:t,recurring:a,paymentAccount:r||void 0})},deleteBill:e=>{h&&(0,ei.zb)((0,C.H9)(h,e))}})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 flex flex-col gap-8",children:[(0,a.jsx)(D,{income:x,totalBills:p,balance:g,bills:f||[]}),(0,a.jsx)(K,{income:x,bills:f,balance:g}),(0,a.jsx)(et,{})]})]})]})}var ec=t(85977);let ed=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(ec.bL,{ref:s,className:(0,j.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});ed.displayName=ec.bL.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(ec._V,{ref:s,className:(0,j.cn)("aspect-square h-full w-full",t),...r})}).displayName=ec._V.displayName;let em=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(ec.H4,{ref:s,className:(0,j.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});em.displayName=ec.H4.displayName;var eu=t(89615),ex=t(70154);let eh=eu.bL,ef=eu.l9;eu.YJ,eu.ZL,eu.Pb,eu.z6,r.forwardRef((e,s)=>{let{className:t,inset:r,children:l,...n}=e;return(0,a.jsxs)(eu.ZP,{ref:s,className:(0,j.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...n,children:[l,(0,a.jsx)(er.A,{className:"ml-auto"})]})}).displayName=eu.ZP.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eu.G5,{ref:s,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=eu.G5.displayName;let ep=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,a.jsx)(eu.ZL,{children:(0,a.jsx)(eu.UC,{ref:s,sideOffset:r,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});ep.displayName=eu.UC.displayName;let eg=r.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(eu.q7,{ref:s,className:(0,j.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...l})});eg.displayName=eu.q7.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,checked:l,...n}=e;return(0,a.jsxs)(eu.H_,{ref:s,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eu.VF,{children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})}),r]})}).displayName=eu.H_.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(eu.hN,{ref:s,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eu.VF,{children:(0,a.jsx)(ex.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=eu.hN.displayName;let ej=r.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(eu.JU,{ref:s,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...l})});ej.displayName=eu.JU.displayName;let ev=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eu.wv,{ref:s,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});ev.displayName=eu.wv.displayName;var eN=t(91721),eb=t(33349),ey=t(6874),ew=t.n(ey);function ek(){var e;let{user:s,isUserLoading:t,auth:i}=(0,n.D3)(),o=(0,l.useRouter)();(0,r.useEffect)(()=>{t||s||o.push("/login")},[s,t,o]);let c=(null==s||null==(e=s.email)?void 0:e.substring(0,2).toUpperCase())||"U";return t||!s?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)("p",{children:"Loading..."})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("main",{className:"container mx-auto p-4 md:p-8",children:[(0,a.jsxs)("header",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-headline font-bold text-foreground tracking-tight",children:"Anna's budget"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2 max-w-2xl",children:"A clean and simple way to track your monthly income and bills."})]}),(0,a.jsxs)(eh,{children:[(0,a.jsx)(ef,{asChild:!0,children:(0,a.jsx)(p.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full shadow-neumorphic hover:shadow-neumorphic-inset",children:(0,a.jsx)(ed,{className:"h-10 w-10",children:(0,a.jsx)(em,{className:"bg-primary/10 text-primary font-semibold",children:c})})})}),(0,a.jsxs)(ep,{className:"w-56",align:"end",forceMount:!0,children:[(0,a.jsx)(ej,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:"My Account"}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:s.email})]})}),(0,a.jsx)(ev,{}),(0,a.jsx)(eg,{asChild:!0,children:(0,a.jsxs)(ew(),{href:"/profile",className:"cursor-pointer",children:[(0,a.jsx)(eN.A,{className:"mr-2 h-4 w-4"}),"Profile"]})}),(0,a.jsx)(ev,{}),(0,a.jsxs)(eg,{onClick:()=>{i&&i.signOut()},className:"cursor-pointer text-red-600",children:[(0,a.jsx)(eb.A,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]}),(0,a.jsx)(eo,{},s.uid)]})})}},85057:(e,s,t)=>{"use strict";t.d(s,{J:()=>c});var a=t(95155),r=t(12115),l=t(40968),n=t(74466),i=t(59434);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.b,{ref:s,className:(0,i.cn)(o(),t),...r})});c.displayName=l.b.displayName},85267:(e,s,t)=>{Promise.resolve().then(t.bind(t,67991))}},e=>{var s=s=>e(e.s=s);e.O(0,[992,644,530,506,558,874,769,441,684,358],()=>s(85267)),_N_E=e.O()}]);